import{r as l,j as e,f as F,u as p}from"./vendor-Cc93p67d.js";import{n as H,S as G}from"./game-content-CAiXDZ7n.js";import{bg as $,bh as Y,bi as V,bj as U,bk as K,ay as z,bl as X,aD as q,bm as J,u as Q,bn as W}from"./game-core-YH_PBf-X.js";import{E as P}from"./EnhancedButton-DVdhyrz_.js";import{g as Z}from"./index-BK-f2KU6.js";import"./phaser-DkaA9Y8j.js";const ee="2026.1.0",R={version:ee},te=/^(\d{4})\.(\d+)\.(\d+)$/,I=R.version.match(te),re=new Date().getFullYear(),ae=R.version,se=I?Number(I[1]):re,c={borderDefault:"rgba(56,189,248,0.24)",borderActive:"rgba(99,102,241,0.7)",borderHover:"rgba(56,189,248,0.45)",background:"linear-gradient(140deg, rgba(10,17,30,0.96), rgba(11,25,46,0.86))",backgroundPressed:"linear-gradient(140deg, rgba(17,28,49,0.98), rgba(15,34,58,0.92))",listBackground:"rgba(9,15,26,0.98)",shadowRest:"0 14px 28px rgba(8,13,23,0.52)",shadowActive:"0 18px 36px rgba(14,30,52,0.58)",textPrimary:"#f0f6ff",textSubtle:"#8da2c0",textMuted:"#6b7a94"},ne={hud:{width:"100%",triggerPadding:"0.65rem 0.85rem",triggerFontSize:"0.85rem",optionFontSize:"0.85rem",summaryFontSize:"0.7rem",optionPadding:"0.55rem 0.7rem",maxListHeight:220},menu:{width:"min(320px, 100%)",triggerPadding:"0.75rem 1rem",triggerFontSize:"0.92rem",optionFontSize:"0.92rem",summaryFontSize:"0.72rem",optionPadding:"0.6rem 0.85rem",maxListHeight:260}},oe={position:"absolute",top:"50%",right:"0.9rem",transform:"translateY(-50%)",pointerEvents:"none",fontSize:"0.8rem",transition:"transform 0.18s ease",color:c.textSubtle},ie=({config:i,isHighlighted:o,isSelected:f})=>({width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"0.25rem",border:"none",borderRadius:"9px",padding:i.optionPadding,background:f||o?"linear-gradient(135deg, rgba(56,189,248,0.22), rgba(59,130,246,0.18))":"transparent",color:c.textPrimary,cursor:"pointer",textAlign:"left",transition:"background 0.15s ease, color 0.15s ease, transform 0.12s ease",transform:o?"translateX(4px)":"translateX(0)"}),le=i=>({fontSize:i.summaryFontSize,lineHeight:1.4,color:c.textMuted}),de=({value:i,options:o,onChange:f,variant:N="hud",fullWidth:E=!1,dataFocusIgnore:d=!1,triggerId:k})=>{var D;const g=`${l.useId()}-autobattle-profiles`,u=ne[N],y=l.useRef(null),_=l.useRef(null),a=l.useRef(null),[s,m]=l.useState(!1),[x,j]=l.useState(()=>Math.max(o.findIndex(r=>r.id===i),0)),w=o.length>4;l.useEffect(()=>{if(!s)return;const r=n=>{const t=n.target;!y.current||!t||y.current.contains(t)||m(!1)};return document.addEventListener("pointerdown",r),()=>{document.removeEventListener("pointerdown",r)}},[s]),l.useEffect(()=>{s||j(Math.max(o.findIndex(r=>r.id===i),0))},[s,o,i]),l.useEffect(()=>{if(!s)return;const r=a.current;if(!r)return;const n=r.querySelector(`[data-option-index="${x}"]`);n==null||n.scrollIntoView({block:"nearest"})},[s,x]);const L=l.useMemo(()=>o.find(r=>r.id===i)??o[0],[o,i]),h=l.useCallback(r=>{var n;m(!1),r!==i&&f(r),(n=_.current)==null||n.focus()},[f,i]),B=l.useCallback(()=>{m(r=>!r)},[]),S=l.useCallback(r=>{m(!0),j(n=>o.length===0?n:(n+r+o.length)%o.length)},[o.length]),M=l.useCallback(r=>{if(r.key==="ArrowDown"){r.preventDefault(),S(1);return}if(r.key==="ArrowUp"){r.preventDefault(),S(-1);return}if(r.key==="Enter"||r.key===" "){if(r.preventDefault(),!s){m(!0);return}const n=o[x];n&&h(n.id);return}r.key==="Escape"&&s&&(r.preventDefault(),m(!1))},[x,S,s,o,h]),b={position:"relative",width:E?"100%":u.width,pointerEvents:"auto"},A={width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.6rem",borderRadius:"12px",border:`1px solid ${s?c.borderActive:c.borderDefault}`,background:s?c.backgroundPressed:c.background,color:c.textPrimary,padding:u.triggerPadding,fontSize:u.triggerFontSize,lineHeight:1.4,cursor:"pointer",transition:"border-color 0.18s ease, background 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease",boxShadow:s?c.shadowActive:c.shadowRest,textAlign:"left"},O={position:"absolute",left:0,right:0,top:"calc(100% + 0.45rem)",borderRadius:"12px",border:`1px solid ${c.borderHover}`,background:c.listBackground,boxShadow:"0 24px 54px rgba(8,14,26,0.65)",padding:w?"0.45rem":"0.35rem 0.4rem",display:"flex",flexDirection:"column",gap:"0.25rem",maxHeight:w?`${u.maxListHeight}px`:void 0,overflowY:w?"auto":"hidden",opacity:s?1:0,pointerEvents:s?"auto":"none",transform:s?"translateY(0)":"translateY(-6px)",transition:"opacity 0.16s ease, transform 0.18s ease",zIndex:20};return e.jsxs("div",{ref:y,style:b,"data-controller-focus-ignore":d?"true":void 0,children:[e.jsxs("button",{type:"button",ref:_,id:k,"aria-haspopup":"listbox","aria-expanded":s,"aria-controls":g,style:A,onClick:B,onKeyDown:M,children:[e.jsx("span",{children:L==null?void 0:L.name}),e.jsx("span",{style:{...oe,transform:`translateY(-50%) rotate(${s?180:0}deg)`},children:"▾"})]}),e.jsx("div",{ref:a,id:g,role:"listbox","aria-activedescendant":s?`${g}-${((D=o[x])==null?void 0:D.id)??"inactive"}`:void 0,style:O,children:o.map((r,n)=>{const t=r.id===i,v=n===x;return e.jsxs("button",{type:"button",role:"option",id:`${g}-${r.id}`,"data-option-index":n,"aria-selected":t,style:ie({config:u,isHighlighted:v,isSelected:t}),onMouseEnter:()=>j(n),onFocus:()=>j(n),onMouseDown:T=>{T.preventDefault()},onClick:()=>h(r.id),children:[e.jsx("span",{style:{fontSize:u.optionFontSize,fontWeight:t?600:500},children:r.name}),e.jsx("span",{style:le(u),children:r.summary})]},r.id)})})]})},ce=(...i)=>i.filter(Boolean).join(" "),pe=({onStartNewGame:i,onContinue:o,hasActiveGame:f})=>{const[N,E]=l.useState("landing"),d=F(),k=p(t=>t.settings.locale);p(t=>t.settings.testMode);const C=p(t=>t.settings.autoBattleEnabled),g=p(t=>t.settings.autoBattleProfile),u=p(t=>t.settings.lightsEnabled),y=p(t=>t.surveillance.hud.overlayEnabled),_=p(t=>t.hudLayout.override),a=H(k),s=a.autoBattle,m=_??"auto",x=t=>{t!==k&&(d(Y(t)),d(V(t)),d(U(t)),d(K(t)))},j=()=>{const t=!u;d(J(t)),Q({lightsEnabled:t})},w=()=>{d(q({enabled:!y}))},L=t=>{const v=t.target.value;if(v==="auto"){d(W(null));return}d(W(v))},h=[{id:"manual",name:s.manualOption.name,summary:s.manualOption.summary},...$.map(t=>({id:t,name:s.profiles[t].name,summary:s.profiles[t].summary}))],B=C?g:"manual",S=h.find(t=>t.id===B)??h[0],M=t=>{if(t==="manual"){C&&d(z(!1));return}C||d(z(!0)),t!==g&&d(X(t))},b="mb-[0.5rem] block text-[0.78rem] font-semibold uppercase tracking-[0.08em] text-[#94a3b8]",A="hud-menu-toggle flex cursor-pointer items-center gap-[0.65rem] rounded-[8px] border border-[rgba(148,163,184,0.25)] bg-[rgba(30,41,59,0.5)] px-[0.85rem] py-[0.5rem] transition-[background-color,border-color,box-shadow] duration-200 hover:border-[rgba(56,189,248,0.35)] hover:bg-[rgba(30,41,59,0.7)] hover:shadow-[0_0_12px_rgba(56,189,248,0.15)]",O="hud-menu-language-button rounded-[8px] border border-[rgba(148,163,184,0.25)] bg-[rgba(30,41,59,0.5)] px-[0.9rem] py-[0.5rem] text-[0.86rem] font-normal tracking-[0.03em] text-[#94a3b8] transition-all duration-200 hover:border-[rgba(56,189,248,0.4)] hover:text-[#f8fafc] hover:shadow-[0_0_12px_rgba(56,189,248,0.15)]",D="border-2 border-[rgba(56,189,248,0.6)] bg-[rgba(56,189,248,0.15)] font-semibold text-[#e2e8f0] shadow-[0_0_15px_rgba(56,189,248,0.2)]",r="hud-menu-select w-full appearance-none rounded-[10px] border border-[rgba(148,163,184,0.25)] bg-[rgba(15,23,42,0.65)] px-[0.85rem] py-[0.55rem] text-[0.9rem] text-[#e2e8f0] outline-none transition-all duration-200 focus:border-[rgba(56,189,248,0.55)] focus:shadow-[0_0_0_2px_rgba(56,189,248,0.15)]",n=()=>e.jsxs("div",{className:"flex flex-col gap-[1.25rem]",children:[e.jsx(P,{"data-testid":"start-new-game",onClick:i,variant:"success",size:"large",fullWidth:!0,icon:"▶",children:a.menu.start}),e.jsx(P,{"data-testid":"continue-game",onClick:o,variant:"secondary",size:"large",fullWidth:!0,disabled:!f,children:a.menu.resume})]});return e.jsx("div",{"data-testid":"game-menu",className:"hud-menu-backdrop fixed inset-0 z-[80] flex items-center justify-center bg-[radial-gradient(circle_at_top,rgba(96,165,250,0.15),rgba(17,24,39,0.95))] font-body text-hud-text backdrop-blur-[4px]",children:e.jsxs("div",{className:"hud-menu-modal flex w-[min(520px,92%)] max-h-[90vh] flex-col overflow-y-auto rounded-[18px] border border-[rgba(148,163,184,0.25)] bg-[rgba(15,23,42,0.92)] px-[2.25rem] py-[1.85rem] text-[#f8fafc] shadow-[0_24px_50px_rgba(15,23,42,0.45)]",children:[e.jsxs("div",{className:"mb-[0.9rem] flex flex-col items-center text-center",children:[e.jsx("div",{className:"mb-[1.1rem] flex justify-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",className:"h-[68px] w-[68px]",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"menuBgGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#1e293b",stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:"#0f172a",stopOpacity:1})]}),e.jsxs("linearGradient",{id:"menuGlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#38bdf8",stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:"#0ea5e9",stopOpacity:1})]})]}),e.jsx("circle",{cx:"32",cy:"32",r:"32",fill:"url(#menuBgGradient)"}),e.jsx("path",{d:"M32 16 L46 24 L32 32 L18 24 Z",fill:"#475569",opacity:"0.6"}),e.jsx("circle",{cx:"32",cy:"32",r:"10",fill:"none",stroke:"url(#menuGlowGradient)",strokeWidth:"2.5"}),e.jsx("circle",{cx:"32",cy:"32",r:"6",fill:"none",stroke:"url(#menuGlowGradient)",strokeWidth:"1.5"}),e.jsx("line",{x1:"32",y1:"22",x2:"32",y2:"26",stroke:"#38bdf8",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"32",y1:"38",x2:"32",y2:"42",stroke:"#38bdf8",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"22",y1:"32",x2:"26",y2:"32",stroke:"#38bdf8",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"38",y1:"32",x2:"42",y2:"32",stroke:"#38bdf8",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"32",cy:"32",r:"2",fill:"#38bdf8"}),e.jsx("path",{d:"M8 8 L12 8 L12 12",fill:"none",stroke:"#0ea5e9",strokeWidth:"1.5",opacity:.4}),e.jsx("path",{d:"M56 8 L52 8 L52 12",fill:"none",stroke:"#0ea5e9",strokeWidth:"1.5",opacity:.4}),e.jsx("path",{d:"M8 56 L12 56 L12 52",fill:"none",stroke:"#0ea5e9",strokeWidth:"1.5",opacity:.4}),e.jsx("path",{d:"M56 56 L52 56 L52 52",fill:"none",stroke:"#0ea5e9",strokeWidth:"1.5",opacity:.4})]})}),e.jsx("p",{className:"mb-[0.75rem] text-[0.875rem] uppercase tracking-[0.35em] text-[#60a5fa]",children:a.menu.tag}),e.jsx("h1",{className:"mb-[0.45rem] text-[2.48rem] font-bold",style:{...Z("#bfdbfe","#38bdf8"),filter:"drop-shadow(0 0 20px rgba(56, 189, 248, 0.5))",lineHeight:"1.08",paddingBottom:"0.1rem"},children:a.menu.title})]}),N==="landing"?e.jsxs(e.Fragment,{children:[n(),e.jsx("div",{className:"mt-[1.1rem]",children:e.jsx(P,{"data-testid":"menu-open-settings",onClick:()=>E("settings"),variant:"primary",size:"large",fullWidth:!0,children:a.menu.settingsCTA})})]}):e.jsxs("div",{"data-testid":"menu-settings-panel",className:"hud-menu-section mt-[0.35rem] flex flex-col gap-[0.9rem] rounded-[14px] border border-[rgba(148,163,184,0.25)] bg-[rgba(15,23,42,0.6)] p-[0.82rem]",children:[e.jsx("div",{className:"hud-menu-section__header border-b border-[rgba(148,163,184,0.15)] pb-[0.5rem]",children:e.jsx("h2",{className:"m-0 text-[0.95rem] font-semibold uppercase tracking-[0.05em] text-[#e2e8f0]",children:a.menu.settingsHeading})}),e.jsxs("div",{className:"flex flex-col gap-[0.75rem]",children:[e.jsxs("div",{children:[e.jsx("label",{className:b,children:a.menu.languageLabel}),e.jsx("div",{className:"hud-menu-language-list flex flex-wrap gap-[0.45rem]",children:G.map(t=>{const v=t===k;return e.jsx("button",{type:"button",onClick:()=>x(t),className:ce(O,v&&D),children:a.menu.languageNames[t]},t)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:b,htmlFor:"auto-battle-mode-select",children:s.heading}),e.jsxs("div",{className:"flex flex-col gap-[0.4rem]",children:[e.jsx(de,{triggerId:"auto-battle-mode-select",value:B,onChange:M,options:h,variant:"menu",fullWidth:!0}),e.jsx("div",{className:"text-[0.64rem] text-[#a5b4d5] leading-[1.35]",children:S.summary})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:b,children:a.menu.surveillanceLabel}),e.jsxs("label",{className:A,children:[e.jsx("input",{type:"checkbox",checked:y,onChange:w,className:"h-5 w-5 cursor-pointer accent-[#38bdf8]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-[0.95rem] font-medium text-[#e2e8f0]",children:a.menu.surveillanceToggleLabel}),e.jsx("div",{className:"mt-[0.1rem] text-[0.66rem] text-[#94a3b8]",children:a.menu.surveillanceToggleDescription})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:b,children:a.menu.lightingLabel}),e.jsxs("label",{className:A,children:[e.jsx("input",{type:"checkbox",checked:u,onChange:j,className:"h-5 w-5 cursor-pointer accent-[#38bdf8]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-[0.95rem] font-medium text-[#e2e8f0]",children:a.menu.lightingToggleLabel}),e.jsx("div",{className:"mt-[0.1rem] text-[0.66rem] text-[#94a3b8]",children:a.menu.lightingToggleDescription})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:b,htmlFor:"hud-layout-select",children:a.menu.hudLayoutLabel}),e.jsxs("div",{className:"flex flex-col gap-[0.35rem]",children:[e.jsxs("select",{id:"hud-layout-select",className:r,value:m,onChange:L,children:[e.jsx("option",{value:"auto",children:a.menu.hudLayoutOptions.auto}),e.jsx("option",{value:"exploration",children:a.menu.hudLayoutOptions.exploration}),e.jsx("option",{value:"stealth",children:a.menu.hudLayoutOptions.stealth}),e.jsx("option",{value:"combat",children:a.menu.hudLayoutOptions.combat})]}),e.jsx("div",{className:"text-[0.64rem] leading-[1.35] text-[#a5b4d5]",children:a.menu.hudLayoutDescription})]})]}),!1]})]}),N==="settings"&&e.jsx("div",{className:"mt-[0.75rem]",children:e.jsx(P,{"data-testid":"menu-close-settings",onClick:()=>E("landing"),variant:"secondary",size:"medium",fullWidth:!0,children:a.menu.settingsBack})}),e.jsxs("div",{className:"mt-[1.1rem] flex flex-wrap items-center justify-center gap-[0.65rem] text-center text-[0.75rem] uppercase tracking-[0.22em] text-[#64748b]",children:[e.jsx("span",{children:a.menu.alphaLabel(se)}),e.jsxs("span",{className:"inline-flex items-center gap-[0.35rem] text-[#94a3b8]",children:[e.jsx("span",{"aria-hidden":"true",children:"•"}),e.jsx("span",{children:`v${ae}`})]})]})]})})};export{pe as default};
