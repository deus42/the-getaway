import{f as D,u as R,r as p,j as e}from"./vendor-Cc93p67d.js";import{bs as W,bK as B,br as M,bx as V,by as E}from"./game-core-BQmOiyjE.js";import{E as H}from"./EnhancedButton-DVdhyrz_.js";import{g as L}from"./index-C6kEWTVc.js";import"./phaser-DkaA9Y8j.js";import"./game-content-BDc39Z5c.js";const N={position:"fixed",inset:0,zIndex:11e3,backgroundColor:"rgba(8, 15, 31, 0.92)",display:"flex",justifyContent:"center",alignItems:"center",padding:"2vh 2vw"},$={width:"min(760px, 94vw)",maxHeight:"82vh",overflow:"hidden",background:"linear-gradient(160deg, rgba(15, 23, 42, 0.98), rgba(8, 11, 24, 0.92))",borderRadius:"18px",border:"2px solid rgba(56, 189, 248, 0.22)",boxShadow:"0 36px 80px rgba(2, 6, 23, 0.7)",color:"#e2e8f0",display:"flex",flexDirection:"column"},F={padding:"1.2rem 1.5rem 0.9rem",borderBottom:"1px solid rgba(56, 189, 248, 0.14)"},U={fontSize:"1.3rem",fontWeight:700,letterSpacing:"0.12em",textTransform:"uppercase",margin:0,marginBottom:"0.35rem",...L("#bfdbfe","#38bdf8"),filter:"drop-shadow(0 0 18px rgba(56, 189, 248, 0.45))"},G={fontSize:"0.78rem",color:"#94a3b8",margin:0},K={padding:"1.2rem 1.5rem",display:"flex",flexDirection:"column",gap:"1.2rem",overflowY:"auto"},k={display:"flex",flexDirection:"column",gap:"0.8rem"},v={fontSize:"0.85rem",fontWeight:600,letterSpacing:"0.1em",textTransform:"uppercase",color:"#38bdf8",marginBottom:"0.35rem"},C={display:"inline-flex",alignItems:"center",gap:"0.4rem",padding:"0.35rem 0.7rem",borderRadius:"999px",background:"rgba(56, 189, 248, 0.15)",border:"1px solid rgba(56, 189, 248, 0.4)",fontSize:"0.75rem",fontWeight:600,color:"#38bdf8"},O={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"0.9rem"},_={background:"rgba(30, 41, 59, 0.6)",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"10px",padding:"0.85rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},Y={flex:1,minWidth:0},q={fontSize:"0.82rem",fontWeight:600,color:"#e2e8f0",marginBottom:"0.25rem",letterSpacing:"0.03em"},J={fontSize:"0.66rem",color:"#94a3b8",lineHeight:1.3},Q={fontSize:"0.6rem",color:"#34d399",marginTop:"0.25rem",letterSpacing:"0.04em",textTransform:"uppercase"},X={display:"flex",alignItems:"center",gap:"0.4rem",flexShrink:0},Z={fontSize:"1.35rem",fontWeight:700,color:"#38bdf8",minWidth:"42px",textAlign:"center",fontFamily:"'DM Mono', monospace",lineHeight:1},m=l=>({width:"32px",height:"32px",flexShrink:0,borderRadius:"8px",backgroundColor:l?"rgba(148, 163, 184, 0.1)":"rgba(56, 189, 248, 0.2)",border:`1px solid ${l?"rgba(148, 163, 184, 0.2)":"rgba(56, 189, 248, 0.4)"}`,color:l?"#64748b":"#38bdf8",fontSize:"1.2rem",fontWeight:700,cursor:l?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",outline:"none",padding:0,background:l?"rgba(148, 163, 184, 0.1)":"rgba(56, 189, 248, 0.2)"}),ee={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.7rem"},te={background:"rgba(30, 41, 59, 0.6)",border:"1px solid rgba(148, 163, 184, 0.2)",borderRadius:"8px",padding:"0.6rem 0.8rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.6rem"},ie={fontSize:"0.75rem",color:"#e2e8f0",flex:1,minWidth:0},ne={display:"flex",alignItems:"center",gap:"0.6rem",flexShrink:0},le={fontSize:"1.1rem",fontWeight:700,color:"#34d399",minWidth:"36px",textAlign:"center",fontFamily:"'DM Mono', monospace",lineHeight:1},re={padding:"1rem 1.8rem 1.5rem",borderTop:"1px solid rgba(56, 189, 248, 0.18)",display:"flex",justifyContent:"flex-end"},g={strength:{label:"Strength",description:"Melee damage, carry weight"},perception:{label:"Perception",description:"Hit chance, awareness"},endurance:{label:"Endurance",description:"Max health & stamina capacity"},charisma:{label:"Charisma",description:"Dialogue, persuasion"},intelligence:{label:"Intelligence",description:"Skill points, hacking"},agility:{label:"Agility",description:"Action points, dodge"},luck:{label:"Luck",description:"Critical chance"}},me=({onComplete:l})=>{const c=D(),n=R(t=>t.player.data),[o,b]=p.useState(n.attributePoints),[a,y]=p.useState(n.skillPoints),[f]=p.useState(n.attributePoints),[h]=p.useState(n.skillPoints),S=o>0||a>0,P=f>0||h>0,I=t=>{o<=0||n.skills[t]>=10||(c(M(t)),b(i=>i-1))},T=t=>{n.skills[t]<=1||(c(B(t)),b(i=>i+1))},A=(t,i,r)=>{a<=0||(n.skillTraining[t]||0)+i>r||(c(E(t)),y(j=>Math.max(0,j-1)))},z=(t,i)=>{(n.skillTraining[t]||0)-i<0||(c(V(t)),y(s=>s+1))},w=["strength","perception","endurance","charisma","intelligence","agility","luck"];return e.jsx("div",{style:N,role:"dialog","aria-modal":"true","aria-label":"Level Up - Allocate Points",children:e.jsxs("div",{style:$,children:[e.jsxs("header",{style:F,children:[e.jsx("h2",{style:U,children:"Level Up - Allocate Points"}),e.jsx("p",{style:G,children:"Spend your points wisely - allocations are permanent"})]}),e.jsxs("div",{style:K,children:[f>0&&e.jsxs("section",{style:k,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("h3",{style:v,children:"Attributes"}),e.jsxs("span",{style:C,children:[o," ",o===1?"Point":"Points"," Remaining"]})]}),e.jsx("div",{style:O,children:w.map(t=>e.jsxs("div",{style:_,children:[e.jsxs("div",{style:Y,children:[e.jsx("div",{style:q,children:g[t].label}),e.jsx("div",{style:J,children:g[t].description}),t==="endurance"&&e.jsxs("div",{style:Q,children:["Max Stamina: ",n.maxStamina," (+5 per point)"]})]}),e.jsxs("div",{style:X,children:[e.jsx("button",{onClick:()=>T(t),disabled:n.skills[t]<=1,style:m(n.skills[t]<=1),title:`Decrease ${g[t].label}`,children:"−"}),e.jsx("div",{style:Z,children:n.skills[t]}),e.jsx("button",{onClick:()=>I(t),disabled:o<=0||n.skills[t]>=10,style:m(o<=0||n.skills[t]>=10),title:`Increase ${g[t].label}`,children:"+"})]})]},t))})]}),h>0&&e.jsxs("section",{style:k,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("h3",{style:v,children:"Skills"}),e.jsxs("span",{style:C,children:[a," ",a===1?"Point":"Points"," Remaining"]})]}),W.map(t=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"#94a3b8",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:t.label}),e.jsx("div",{style:ee,children:t.skills.map(i=>{const r=i.id,s=n.skillTraining[r]||0,d=n.taggedSkillIds.includes(r)?i.taggedIncrement:i.increment,u=s-d>=0&&s>0,x=a>0&&s+d<=i.maxValue;return e.jsxs("div",{style:te,children:[e.jsx("span",{style:ie,children:i.name}),e.jsxs("div",{style:ne,children:[e.jsx("button",{onClick:()=>z(r,d),disabled:!u,style:m(!u),title:u?`Decrease ${i.name}`:"Cannot refund below zero",children:"−"}),e.jsx("span",{style:le,children:s}),e.jsx("button",{onClick:()=>A(r,d,i.maxValue),disabled:!x,style:m(!x),title:x?`Increase ${i.name}`:"No points remaining or at cap",children:"+"})]})]},i.id)})})]},t.id))]}),!P&&e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#94a3b8",fontSize:"0.95rem"},children:"No points to allocate. Click Continue to proceed."})]}),e.jsx("footer",{style:re,children:e.jsx(H,{onClick:l,variant:"primary",size:"medium",disabled:S,title:S?"Spend all points before continuing":"Continue",children:"Continue"})})]})})};export{me as default};
